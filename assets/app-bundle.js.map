{"version":3,"sources":["environment.js","elems/md-autocomplete.js","elems/md-button.js","elems/md-checkbox.js","elems/md-drawer.js","elems/md-input.js","elems/md-menu.js","elems/md-select.js","elems/md-shadow.js","elems/md-snackbar.js","elems/md-switch.js","elems/md-table.js","views/account.js","views/drugs.js","views/index.js","views/inventory.js","views/join.js","views/login.js","views/records.js","views/routes.js","views/shipments.js","libs/csv.js","libs/environment.js","libs/pouch.js","environment copy.js","binding-behaviors/environment copy.js","binding-behaviors/array.js","views/inventory copy.js","elems/md-select copy.js","elems/md-loading.js","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/account.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/drugs.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/index.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/inventory.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/join.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/login.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/records.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/routes.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/shipments.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-autocomplete.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-button.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-checkbox.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-drawer.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-input.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-menu.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-select.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-snackbar.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-switch.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/views/inventory copy.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-select copy.html","/Users/Adam/Documents/Node/dscsa-repo/node_modules/client/src/elems/md-loading.html"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["export default {\n  debug: true,\n  testing: true\n};\n","import {bindable, bindingMode} from 'aurelia-framework';\n\n@bindable({name:'value', defaultBindingMode: bindingMode.twoWay})\n@bindable('disabled')\n@bindable('placeholder')\nexport class MdAutocompleteCustomElement {\n  toggleResults($event) {\n    //Foucusout removes the results from the view before the click on\n    //the selected result can register.  Delaying a bit prevents this\n    //http://stackoverflow.com/questions/18848738/click-event-not-triggered-after-focusout-event\n    setTimeout(() => this.showResults = ! this.showResults, 200)\n  }\n}\n","import {bindable, inject} from 'aurelia-framework';\n\n@bindable('form')\n@bindable('class')\n@bindable('raised')\n@bindable('fab')\n@bindable('disabled')\n@bindable('color')\n@inject(Element)\nexport class MdButtonCustomElement {\n\n  constructor(element) {\n    this.element = element\n    this.change  = this.change.bind(this)\n\n\n  }\n\n  //click.trigger won't trigger when button is disabled, but delegate will\n  //but we cant use trigger because $parent's delegate will still fire regardless\n  //so use delegate, but for some reason delegate stops bubbling even if we do\n  //\"return true\" so we need to to refire the event.\n  click($event) {\n    //console.log('click', this.button.disabled))\n    if ( ! this.disabledOrInvalid)\n      this.element.dispatchEvent(new MouseEvent($event.type, $event))\n  }\n\n  disabledChanged() {\n    this.button && this.change()\n  }\n\n  change(input) {\n    this.disabledOrInvalid = this.disabled || this.disabled === '' || (this.formElement && ! this.formElement.checkValidity())\n  }\n\n  attached() {\n    //TODO allow attribute value to specify the form by name.\n    //TODO a detached method.  Are these event listeners leaking?\n    if (this.form === '') {\n      this.formElement = this.element.closest('form')\n      this.formElement.addEventListener('change', this.change)\n      this.formElement.addEventListener('input', this.change)\n    }\n\n    //When going \"back\" to \"Create New Shipment\" form.checkValidity() would return true\n    //initially and then turn to false. setTimeout seems to eliminate this problem\n    setTimeout(this.change)\n\n    this.class && this.button.classList.add(...this.class.split(' '))\n    //attributes are made an empty string by default, so we can't just test for truthiness\n    //primary and accent are dynamic/reactive based on disable so need to be in the template.\n    if (typeof this.color == 'string' && this.color.slice(0, 4) != 'mdl-') {\n      this.color = 'mdl-button--'+(this.color || 'colored')\n    }\n\n    if (this.fab > 0) {\n      this.button.classList.add('mdl-button--fab')\n      this.button.style.height = this.fab+'px'\n      this.button.style.width  = this.fab+'px'\n      this.button.style['min-width'] = this.button.style.width\n      this.button.style['font-size'] = this.fab*.75+'px'\n      this.button.style['line-height'] = this.fab+'px'\n      //this.button.style['min-width'] = this.element.fab+'px'\n    }\n\n    if(this.element.parentElement.tagName == 'MD-DRAWER') {\n      this.button.style.width = \"100%\"\n      this.button.style.height = \"auto\"\n      this.button.style.padding = \"16px 8px\"\n      this.button.style['line-height'] = \"18px\"\n      this.button.style['text-align'] = \"left\"\n    }\n  }\n\n}\n","import {bindable, bindingMode, inject} from 'aurelia-framework';\n\n@bindable({name:'checked', defaultBindingMode: bindingMode.twoWay})\n@bindable('disabled')\n@bindable('required')\n@inject(Element)\nexport class MdCheckboxCustomElement {\n\n  constructor(element) {\n    this.tabindex = element.tabIndex\n    //Can't do this with <template click.delegate> since that overwrites authors delegate fn\n    element.addEventListener('click', e => this.disabled && e.stopPropagation())\n  }\n\n  //A click on input causes a UI change and then if aurelia is also listening for a\n  //click that causes a state change, then the two state changes cancel and it looks\n  //like the switch is locked.  Prevent this from happening.\n  stopPropogation() {\n    return true\n  }\n\n  //If we are relying on parent method returning true then this isn't needed,\n  //but if we are binding to check to change it programmatically we need this\n\n  checkedChanged() {\n    this.checked = !! this.checked //force boolean or we get weird behavior\n    setTimeout(_ => this.label && this.label.MaterialCheckbox.checkToggleState()) //checked hasn't actually been changed yet so wait for the change and then check\n  }\n\n  disabledChanged() {\n    setTimeout(_ => this.label && this.label.MaterialCheckbox.checkDisabled()) //disabled hasn't actually been changed yet so wait for the change and then check\n  }\n\n  attached() {\n    componentHandler.upgradeAllRegistered()\n    this.checkedChanged()\n    this.disabledChanged()\n  }\n}\n","import {inject} from 'aurelia-framework';\n\nlet drawer = document.createElement('nav')\ndrawer.classList.add(\"mdl-layout__drawer\")\nconsole.log('drawer was created')\n\n@inject(Element)\nexport class MdDrawerCustomElement {\n\n  constructor(element) {\n    element.classList.add(\"mdl-navigation\")\n    element.style['padding-top'] = '6px'\n\n    this.autofocus = element.hasAttribute('autofocus')\n    //Move md-nav into the drawer\n    drawer.appendChild(element)\n    console.log('drawer was constructed')\n  }\n\n  attached() {\n    this.header = document.querySelector('.mdl-layout__header')\n    this.header.parentNode.insertBefore(drawer, this.header.nextSibling)\n\n    componentHandler.upgradeAllRegistered()\n    //componentHandler.upgradeDom()\n\n    this.button = document.querySelector('.mdl-layout__drawer-button')\n\n    if (this.button)\n      this.button.style.display = 'block'\n\n    if (this.autofocus && this.header.firstChild)\n      this.header.firstChild.click()\n  }\n\n  detached() {\n    //New drawer is attached before old drawer is detached so children.length == 2\n    //except if going to view without a drawer (e.g login) in which length == 1\n    //console.log('detached', drawer.children.length)\n    if (drawer.children.length == 1 && this.button)\n      this.button.style.display = 'none'\n\n    //Empty the drawer\n    drawer.removeChild(drawer.firstChild)\n  }\n}\n","import {inject, bindable, bindingMode} from 'aurelia-framework';\n\n@bindable({name:'value', defaultBindingMode: bindingMode.twoWay})\n@bindable('disabled')\n@bindable('pattern')\n@bindable('step')\n@bindable('type')\n@bindable('placeholder')\n@bindable('input')\n@bindable('max')\n@bindable('required')\n@bindable('minlength')\nexport class MdInputCustomElement {\n\n  valueChanged() {\n    setTimeout(_=> {\n      this.div && this.div.MaterialTextfield && this.div.MaterialTextfield.checkDirty()\n      this.div && this.div.MaterialTextfield && this.div.MaterialTextfield.checkValidity()\n    })\n  }\n\n  disabledChanged() {\n    setTimeout(_ => this.div && this.div.MaterialTextfield && this.div.MaterialTextfield.checkDisabled()) //disabled hasn't actually been changed yet so wait for the change and then check\n  }\n\n  attached() {\n    componentHandler.upgradeElement(this.div)\n\n    if ( ! this.placeholder)\n      this.div.classList.remove('has-placeholder')\n\n    if (this.autoselect)\n      this.div.MaterialTextfield.input_.focus()\n  }\n}\n","import {bindable, inject} from 'aurelia-framework';\n\n@inject(Element)\nexport class MdMenuCustomElement {\n\n  constructor(element) {\n    //Router add both pages to view at same time.  This confuses the MDL library\n    //which add the button's click handler to the previous page rather than the\n    //next page since the two ids are the same.  Prevent this by randomly generating\n    //the id.  Also 'for.bind' doesn't seem to work so using synomym data-md-for\n    this.id = 'id'+Date.now()\n    this.element = element\n  }\n\n  attached() {\n    for (let li of this.element.querySelectorAll('li'))\n      li.classList.add('mdl-menu__item')\n  }\n}\n","import {bindable, bindingMode, inject} from 'aurelia-framework';\n\n@bindable({name:'value', defaultBindingMode: bindingMode.twoWay})\n@bindable('style')\n@bindable('options')\n@bindable('disabled')\n@bindable('default')\n@bindable('required')\n@bindable('property')\nexport class MdSelectCustomElement {\n\n  //need when toggling back and forth on shipments page to make sure from/to account disables where updated\n  disabledChanged() {\n    setTimeout(_=> this.div && this.div.MaterialTextfield.checkDisabled())\n  }\n\n  valueChanged() {\n    setTimeout(_=> this.div && this.div.MaterialTextfield.checkDirty())\n  }\n\n  attached() {\n    componentHandler.upgradeElement(this.div)\n  }\n}\n","import {inject} from 'aurelia-framework';\n\n@inject(Element)\nexport class MdShadowCustomAttribute {\n\n  constructor(element) {\n    element.classList.add(\"mdl-shadow--\"+element.getAttribute('md-shadow')+\"dp\")\n  }\n}\n","import {bindable, inject} from 'aurelia-framework';\n\n@bindable('show')\n@inject(Element)\nexport class MdSnackbarCustomElement {\n\n  constructor(element) {\n    this.element = element\n  }\n\n  attached() {\n    componentHandler.upgradeElement(this.element)\n    this.element.show = opts => {\n      if (typeof opts == 'string')\n        opts = {message:opts, timeout:5000}\n\n      this.element.MaterialSnackbar.showSnackbar(opts)\n    }\n  }\n}\n","import {bindable, bindingMode, inject} from 'aurelia-framework';\n\n@bindable({name:'checked', defaultBindingMode: bindingMode.twoWay})\n@bindable('disabled')\n@bindable('required')\n@inject(Element)\nexport class MdSwitchCustomElement {\n\n  constructor(elem) {\n    //Do not propogate click if element is disabled\n    //Can't do this with <template click.delegate> since that overwrites authors delegate fn\n    elem.addEventListener('click', e => this.disabled && e.stopPropagation())\n  }\n\n  //A click on input causes a UI change and then if aurelia is also listening for a\n  //click that causes a state change, then the two state changes cancel and it looks\n  //like the switch is locked.  Prevent this from happening.\n  //https://www.kirupa.com/html5/event_capturing_bubbling_javascript.htm\n  stopPropogation() {\n    return true\n  }\n\n  //If we are relying on parent returning true then this isn't needed, but\n  //if we are binding to check to change it programmatically we need this\n  checkedChanged() {\n    this.checked = !! this.checked\n    setTimeout(_ => this.label && this.label.MaterialSwitch.checkToggleState()) //checked hasn't actually been changed yet so wait for the change and then check\n  }\n\n  disabledChanged() {\n    setTimeout(_ => this.label && this.label.MaterialSwitch.checkDisabled()) //disabled hasn't actually been changed yet so wait for the change and then check\n  }\n\n  attached() {\n    componentHandler.upgradeElement(this.label)\n    this.checkedChanged()\n    this.disabledChanged()\n  }\n}\n","import {inject} from 'aurelia-framework';\n\n@inject(Element)\nexport class MdTableCustomAttribute {\n\n  constructor(element) {\n\n    element.classList.add(\"mdl-data-table\")\n    element.classList.add(\"mdl-js-data-table\")\n    element.style.border = \"none\"\n\n    if (element.getAttribute('md-table'))\n      element.classList.add(\"mdl-data-table--selectable\")\n\n    this.element = element\n    //this.checkboxes = element.querySelector('')\n  }\n\n  valueChanged(selectable) {\n\n    let checkboxes = this.element.querySelectorAll('input[type=\"checkbox\"]')\n\n    for (var i=0; i < checkboxes.length; i++) {\n      checkboxes[i].disabled = selectable == 'false'\n    }\n  }\n\n  attached() {\n\n    componentHandler.upgradeAllRegistered()\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {Db}     from '../libs/pouch'\nimport {Router} from 'aurelia-router'\n\n//TODO this is causing Router to revert route and switches to not be upgraded @pageState()\n@inject(Db, Router)\nexport class account {\n\n  constructor(db, router){\n    this.db           = db\n    this.router       = router\n  }\n\n  activate() {\n\n    this.db.user.session.get().then(session => {\n\n      this.session = session\n\n      //TODO allow a valueConverter for each state or do a new search\n      this.db.account.get().then(accounts => {\n        this.accounts = accounts.filter(account => {\n          if (account._id != session.account._id)\n            return true\n          this.account = account\n        })\n      })\n\n      return this.db.user.get().then(users => {\n        this.users = users\n        this.selectUser()\n      })\n    })\n  }\n\n  selectUser(user) {\n    this.user = user || this.users.filter(user => user._id == this.session._id)[0]\n  }\n\n  saveUser() {\n    if (this.user._id) {\n      console.log('saving', this.user)\n      this.db.user.put(this.user)\n    }\n    return true\n  }\n\n  addUser() {\n    this.db.user.post(this.user).then(user => {\n      this.users.unshift(user)\n    }).catch(err => {\n      this.snackbar.show(err.reason)\n    })\n  }\n\n  deleteUser() {\n    let index = this.users.indexOf(this.user)\n    console.log('deleting', this.user, this.users, index)\n    this.db.user.delete(this.user).then(_ => {\n      this.users.splice(index, 1)\n      this.selectUser()\n    })\n    .catch(err => {\n      console.log(err)\n      this.snackbar.show(err.reason)\n    })\n  }\n\n  //Simple debounce doesn't work here to prevent double click\n  //because account is not authorized until the db returns\n  //which means isAuthorized isn't updated yet for the since click\n  authorize(_id) {\n    console.log('account.authorize', _id, this.account.authorized)\n    let index = this.account.authorized.indexOf(_id)\n    let auth  = this.db.account.authorized\n    ~ index\n      ? auth.delete({_id}).then(_ => this.account.authorized.splice(index, 1))\n      : auth.post({_id}).then(_ => this.account.authorized.push(_id))\n\n      return true\n    //TODO reset checkbox and show snackbar if change not made\n  }\n\n  logout() {\n    this.disableLogout = 'Uninstalling...'\n    this.db.user.session.delete().then(_ => {\n      this.router.navigate('login', {trigger:true})\n    })\n    .catch(err => console.log('Logout failed: '+err))\n  }\n}\n\nexport class jsonValueConverter {\n  toView(object = null){\n    //console.log(Object.keys(object), JSON.stringify(object, null, \" \"))\n    return JSON.stringify(object, null, \" \")\n  }\n}\n\nexport class dateValueConverter {\n  toView(date = ''){\n    return date.slice(0, 10)\n  }\n}\n\n//TODO make this work with added items\nexport class filterValueConverter {\n  toView(users = [], filter = ''){\n    filter = filter.toLowerCase()\n    return users.filter(user => {\n      return ~ `${user.name.first} ${user.name.last}`.toLowerCase().indexOf(filter)\n    })\n  }\n}\n","import {inject} from 'aurelia-framework'\nimport {Router} from 'aurelia-router'\nimport {Db}     from '../libs/pouch'\nimport {Csv}    from '../libs/csv'\n\n//@pageState()\n@inject(Db, Router)\nexport class drugs {\n  //constructor(HttpClient = 'aurelia-http-client', Db = './pouch'){\n  constructor(db, router){\n    this.csv    = new Csv(['_id', 'generics', 'form'], ['brand', 'labeler', 'image'])\n    this.db     = db\n    this.router = router\n    this.term   = ''\n    this.scrollDrugs = this.scrollDrugs.bind(this)\n  }\n\n  deactivate() {\n    removeEventListener('keyup', this.scrollDrugs)\n  }\n\n  activate(params) {\n    addEventListener('keyup', this.scrollDrugs)\n    return this.db.user.session.get()\n    .then(session => {\n      return this.db.account.get({_id:session.account._id})\n    })\n    .then(accounts => {\n      this.account = accounts[0]\n      this.drawer  = {\n        ordered:Object.keys(this.account.ordered)\n      }\n\n      // Object.keys(this.account.ordered).map(generic => {\n      //   let ordered = { name:generic }\n      //\n      //   return ordered\n      // })\n\n      if ( ! params.id) {\n        return this.selectGroup(null, true)\n      }\n\n      return this.db.drug.get({_id:params.id}).then(drugs => {\n        this.selectDrug(drugs[0], true)\n      })\n    })\n  }\n\n  scrollGroups($event) {\n    Promise.resolve(this._search).then(_ => {\n      //group won't be a reference so we must search manually\n      let index = this.groups.map(group => group.name).indexOf(this.group.name)\n      this.scrollSelect($event, index, this.groups, group => this.selectGroup(group, true))\n\n      if ($event.which == 13) { //Enter get rid of the results\n        this.selectGroup(null, true)\n        document.querySelector('md-autocomplete input').blur()\n      }\n    })\n\n    $event.stopPropagation() //scrolling groups doesn't need to scroll drugs as well\n  }\n\n  scrollDrugs($event) {\n    this.scrollSelect($event, this.group.drugs.indexOf(this.drug), this.group.drugs, this.selectDrug)\n  }\n\n  scrollSelect($event, index, list, cb, autoselect) {\n\n    let last  = list.length - 1\n\n    if ($event.which == 38) //Keyup\n      cb.call(this, list[index > 0 ? index - 1 : last])\n\n    if ($event.which == 40) //keydown\n      cb.call(this, list[index < last ? index+1 : 0])\n  }\n\n  selectGroup(group, autoselectDrug) {\n    group = group || this.search().then(_ => {\n      return this.groups[0] || {drugs:[]}\n    })\n\n    Promise.resolve(group).then(group => {\n      this.group = group\n      //TODO if this was called by selectDrug then we should establish establish a reference\n      //between the approriate this.group.drugs and this.drug so that changes to the drug\n      //appear in realtime on the right hand side.  This works if selectGroup\n      if (autoselectDrug)\n        this.selectDrug(group.drugs[0])\n    })\n  }\n\n  selectDrug(drug = {generics:[{}]}, autoselectGroup) {\n    if ( ! drug.generic && drug.form) //new drug won't have drug.form yet\n      drug.generic = drug.generics.map(generic => generic.name+\" \"+generic.strength).join(', ')+' '+drug.form\n\n    this.drug = drug\n    this.term = drug.generic || ''\n\n    let url = drug._id ? 'drugs/'+drug._id : 'drugs'\n    this.router.navigate(url, { trigger: false })\n\n    if (autoselectGroup)\n      this.selectGroup()\n  }\n\n  selectDrawer(generic) {\n    this.term = generic\n    this.db.drug.get({generic}).then(drugs => {\n      //Use filter to get an exact match not just one ingredient\n      let group = {name:generic, drugs:drugs.filter(drug => drug.generic == generic)}\n      this.selectGroup(group, true)\n    })\n  }\n\n  search() {\n\n    let term = (this.term || '').trim()\n\n    if (term.length < 3)\n      return Promise.resolve(this.groups = [])\n\n    if (/^[\\d-]+$/.test(term)) {\n      this.regex = RegExp('('+term+')', 'gi')\n      var drugs  = this.db.drug.get({ndc:term})\n    } else {\n      this.regex = RegExp('('+term.replace(/ /g, '|')+')', 'gi')\n      var drugs  = this.db.drug.get({generic:term})\n    }\n\n    let groups = {}\n    return this._search = drugs.then(drugs => {\n      for (let drug of drugs) {\n        drug.generic = genericName(drug)\n        groups[drug.generic] = groups[drug.generic] || {name:drug.generic, drugs:[]}\n        groups[drug.generic].drugs.push(drug)\n      }\n      this.groups = Object.keys(groups).map(key => groups[key])\n    })\n  }\n\n  //We might make a separate database and API out of this one day, but for now just save on account object.\n  //TODO: Warn on delete since we won't save save any of the preferences?\n  order() {\n    if (this.account.ordered[this.group.name]) {\n      //Delete this group from the drawer drawer\n      this.drawer.ordered = this.drawer.ordered.filter(generic => {\n        return generic != this.group.name\n      })\n\n      this.account.ordered[this.group.name] = undefined\n    } else {\n      console.log('order')\n      //Add New Order but Keep Add New Item on Top\n      this.drawer.ordered.unshift(this.group.name)\n      this.account.ordered[this.group.name] = {}\n    }\n\n    this.saveOrder()\n    //return true\n  }\n\n  exportCSV() {\n    this.snackbar.show(`Exporting drugs as csv. This may take a few minutes`)\n    this.db.drug.get().then(drugs => {\n      this.csv.unparse('Drugs.csv', drugs.map(drug => {\n        let generic = genericName(drug)\n        return {\n          '':drug,\n          _id:\" \"+drug._id,\n          upc:\" \"+drug.upc,\n          ndc9:\" \"+drug.ndc9,\n          generic:generic,\n          generics:drug.generics.map(generic => generic.name+\" \"+generic.strength).join(';'),\n          ordered:this.account.ordered[generic] || {minQty:null, minDays:null, message:null}\n        }\n      }))\n    })\n  }\n\n  importCSV() {\n    this.snackbar.show(`Parsing csv file`)\n    function capitalize(text) {\n      return text ? text.trim().toLowerCase().replace(/\\b[a-z]/g, l => l.toUpperCase()) : text\n    }\n    function trim(text) {\n      return text ? text.trim() : text\n    }\n    this.csv.parse(this.$file.files[0]).then(parsed => {\n      this.$file.value = ''\n      return Promise.all(parsed.map(drug => {\n        return {\n          _id:trim(drug._id),\n          brand:trim(drug.brand),\n          form:capitalize(drug.form),\n          image:trim(drug.image),\n          labeler:capitalize(drug.labeler),\n          generics:drug.generics.split(\";\").filter(v => v).map(generic => {\n            let [name, strength] = generic.split(/(?= [\\d.]+)/)\n            return {\n              name:capitalize(name),\n              strength:trim(strength || '').toLowerCase().replace(/ /g, '')\n            }\n          })\n        }\n      }))\n    })\n    .then(rows => {\n      this.snackbar.show(`Parsed ${rows.length} rows. Uploading to server`)\n      return this.db.drug.post(rows)\n    })\n    .then(_ => this.snackbar.show(`Drugs import completed in ${Date.now() - start}ms`))\n    .catch(err => this.snackbar.show('Drugs not imported: '+err))\n  }\n\n  addGeneric() {\n    this.drug.generics.push({name:'', strength:''})\n    this.saveDrug() //button doesn't trigger focusout -> save\n    return true\n  }\n\n  removeGeneric() {\n    this.drug.generics.pop()\n    this.saveDrug() //button doesn't trigger focusout -> save\n    return true\n  }\n\n  // addPkgSize() {\n  //   this.drug.pkgs.push({code:'', size:''})\n  //   return true\n  // }\n  //\n  // removePkgSize() {\n  //   this.drug.pkgs.pop()\n  //   return true\n  // }\n\n  saveOrder() {\n    console.log('saving Order', this.account)\n    return this.db.account.put(this.account)\n  }\n\n  addDrug() {\n    delete this.drug.generic\n    this.db.drug.post(this.drug)\n    .then(res => {\n      //Wait for the server POST to replicate back to client\n      setTimeout(_ => this.selectDrug(this.drug, true), 200)\n    })\n    .catch(err => this.snackbar.show(`Drug not added: ${err.name}`))\n  }\n\n  saveDrug() {\n    this.drug.generic = undefined\n    this.db.drug.put(this.drug)\n    .catch(err => this.snackbar.show(`Drug not saved: ${err.name}`))\n  }\n\n  deleteDrug() {\n    console.log('TO BE IMPLEMENETED')\n  }\n}\n\nexport class jsonValueConverter {\n  toView(object = null){\n    return JSON.stringify(object, null, \" \")\n  }\n}\n\nexport class numberValueConverter {\n  fromView(str, decimals){\n    //Match servers transaction.js default: Empty string -> null, string -> number, number -> number (including 0)\n    return str != null && str !== '' ? +str : null\n  }\n\n  toView(str, decimals){\n    //Match servers transaction.js default: Empty string -> null, string -> number, number -> number (including 0)\n    return str != null && decimals ? (+str).toFixed(decimals) : str\n  }\n}\n\nfunction genericName(drug) {\n  return drug.generics.map(generic => generic.name+\" \"+generic.strength).join(', ')+' '+drug.form\n}\n","export function configure(aurelia) {\n\n  Promise.config({warnings:false})\n  console.log = console.log.bind(console)\n\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-animator-css')\n\n  aurelia.start().then(a => a.setRoot('views/routes'));\n}\n","import {inject} from 'aurelia-framework';\nimport {Db}     from '../libs/pouch'\nimport {Router} from 'aurelia-router';\n\n@inject(Db, Router)\nexport class inventory {\n\n  constructor(db, router){\n    this.db        = db\n    this.router    = router\n    this.resetFilter()\n  }\n\n  activate(params) {\n    return this.db.user.session.get().then(session => {\n      this.account = session.account._id\n      this.selectGroup()\n    })\n  }\n\n  scrollGroups($event) {\n    //group won't be a reference so we must search manually\n    let index = this.groups.map(group => group.name).indexOf(this.group.name)\n    let last  = this.groups.length - 1\n\n    if ($event.which == 38) //Keyup\n      this.selectGroup(this.groups[index > 0 ? index - 1 : last])\n\n    if ($event.which == 40) //keydown\n      this.selectGroup(this.groups[index < last ? index+1 : 0])\n\n    if ($event.which == 13) { //Enter get rid of the results\n      document.querySelector('md-autocomplete input').blur()\n    }\n  }\n\n  selectGroup(group) {\n    group = group || this.search().then(_ => {\n      return this.groups[0] || {transactions:[]}\n    })\n\n    Promise.resolve(group).then(group => {\n      this.term  = group.name\n      this.group = group\n\n      group.transactions.sort((a, b) => {\n        let aExp = a.exp.from || ''\n        let bExp = b.exp.from || ''\n        let aBox = a.location || ''\n        let bBox = b.location || ''\n        let aQty = a.qty.from || ''\n        let bQty = b.qty.from || ''\n\n        if (aBox > bBox) return -1\n        if (aBox < bBox) return 1\n        if (aExp < bExp) return -1\n        if (aExp > bExp) return 1\n        if (aQty > bQty) return -1\n        if (aQty < bQty) return 1\n        return 0\n      })\n\n      this.resetFilter()\n      for (let transaction of group.transactions) {\n        this.filter.exp[transaction.exp.from] = {isChecked:true, count:0, qty:0}\n        this.filter.ndc[transaction.drug._id] = {isChecked:true, count:0, qty:0}\n      }\n    })\n  }\n\n  resetFilter() {\n    this.filter = {exp:{},ndc:{}}\n  }\n\n  search() {\n\n    let term = (this.term || '').trim()\n\n    if (term.length < 3)\n      return Promise.resolve(this.groups = [])\n\n    if (/^[\\d-]+$/.test(term)) {\n      //TODO make this an Rx search.  Also look up ndc in drug db to get generic name then do generic search\n      // this.regex = RegExp('('+term+')', 'gi')\n      // var transactions = this.db.transaction.get({ndc:term, 'shipment._id':this.account})\n    } else {\n      this.regex = RegExp('('+term.replace(/ /g, '|')+')', 'gi')\n      var transactions = this.db.transaction.get({generic:term, 'shipment._id':this.account})\n    }\n\n    let groups = {}\n    return transactions.then(transactions => {\n      for (let transaction of transactions) {\n        groups[transaction.drug.generic] = groups[transaction.drug.generic] || {name:transaction.drug.generic, transactions:[]}\n        groups[transaction.drug.generic].transactions.push(transaction)\n      }\n      this.groups = Object.keys(groups).map(key => groups[key])\n    })\n  }\n\n  signalFilter(obj) {\n    if (obj) obj.val.isChecked = ! obj.val.isChecked\n    this.filter = Object.assign({}, this.filter)\n  }\n\n  saveTransaction(transaction) {\n    //save isChecked in the transaction because the isChecked[$index] has an $index that changes with filters\n    let isChecked = transaction.isChecked\n    delete transaction.isChecked\n    console.log('saving', transaction)\n    this.db.transaction.put(transaction)\n    .then(_ => {\n      transaction.isChecked = isChecked\n    })\n    .catch(e => this.snackbar.show(`Transaction with exp ${transaction.exp.from} and qty ${transaction.qty.from} could not be saved: ${e}`))\n  }\n\n  removeInventory() {\n    let remove = []\n    for (let transaction of this.group.transactions) {\n      if (transaction.isChecked) {\n        remove.push(this.db.transaction.delete(transaction).then(_ =>\n          this.group.transactions.splice(this.group.transactions.indexOf(transaction), 1)\n        ))\n      }\n    }\n\n    Promise.all(remove).then(_ => this.snackbar.show(`${remove.length} transactions removed from inventory`))\n  }\n}\n\n//TODO combine with the shipment filter with the same code\nexport class dateValueConverter {\n\n  toView(date) {\n    if ( ! date ) return ''\n    return date != this.model ? date.slice(5,7)+'/'+date.slice(2,4) : this.view\n  }\n\n  fromView(date){\n    this.view  = date\n\n    let [month, year] = date.split('/')\n    date = new Date('20'+year,month, 1)\n    date.setDate(0)\n\n    return this.model = date.toJSON()\n  }\n}\n\nexport class jsonValueConverter {\n  toView(object = null){\n    return JSON.stringify(object, null, \" \")\n  }\n}\n\nexport class toArrayValueConverter {\n  toView(obj = {}){\n    let arr = []\n    for (var key in obj)\n      arr.push({key, val:obj[key]})\n\n    return arr\n  }\n}\n\n//ADDED step of converting object to array\nexport class filterValueConverter {\n  toView(transactions = [], filter){\n    for (let transaction of transactions) {\n      filter.exp[transaction.exp.from].count = 0\n      filter.exp[transaction.exp.from].qty = 0\n      filter.ndc[transaction.drug._id].count = 0\n      filter.ndc[transaction.drug._id].qty = 0\n    }\n\n    transactions = transactions.filter(transaction => {\n      if (filter.rx) {\n        if ( ! transaction.rx || ! transaction.rx.from) return false\n        if ( ! transaction.rx.from.includes(filter.rx)) return false\n      }\n\n      if ( ! filter.exp[transaction.exp.from].isChecked) {\n        if (filter.ndc[transaction.drug._id].isChecked) {\n          filter.exp[transaction.exp.from].count++\n          filter.exp[transaction.exp.from].qty += transaction.qty.from\n        }\n        return false\n      }\n      if ( ! filter.ndc[transaction.drug._id].isChecked) {\n        if (filter.exp[transaction.exp.from].isChecked) {\n          filter.ndc[transaction.drug._id].count++\n          filter.ndc[transaction.drug._id].qty += transaction.qty.from\n        }\n        return false\n      }\n\n      filter.exp[transaction.exp.from].count++\n      filter.ndc[transaction.drug._id].count++\n      filter.exp[transaction.exp.from].qty += transaction.qty.from\n      filter.ndc[transaction.drug._id].qty += transaction.qty.from\n      return true\n    })\n\n    filter.exp = Object.assign({}, filter.exp)\n    filter.ndc = Object.assign({}, filter.ndc)\n\n    return transactions\n  }\n}\n\nfunction genericName(drug) {\n  return drug.generics.map(generic => generic.name+\" \"+generic.strength).join(', ')+' '+drug.form\n}\n","import {inject}     from 'aurelia-framework'\nimport {Router}     from 'aurelia-router'\nimport {Db}         from '../libs/pouch'\nimport {HttpClient} from 'aurelia-http-client';\n\n//@pageState()\n@inject(Db, Router, HttpClient)\nexport class join {\n\n  constructor(db, router, http){\n    this.db     = db\n    this.router = router\n    this.http   = http\n\n    this.account = {\n      name:'',\n      license:'Pharmacy',\n      street:'',\n      city:'',\n      state:'OR',\n      zip:'',\n      ordered:{}\n    }\n\n    this.user = {\n      name:{first:'Guest',last:'User'},\n      email:'',\n      phone:'650.488.7434',\n      password:'password'\n    }\n  }\n\n  join() {\n    this.db.account.post(this.account)\n    .then(account => {\n      this.user.account = {_id:account._id}\n      return this.db.user.post(this.user)\n    })\n    .then(_ => {\n      return this.db.user.session.post({email:this.user.email, password:this.user.password})\n    })\n    .then(loading => {\n      //wait for all resources except 'drugs' to sync .filter(r => r.name != 'drugs')\n      this.disabled = true\n      this.loading  = loading.resources\n      this.progress = loading.progress\n\n      return Promise.all(loading.syncing)\n    })\n    .then(_ => {\n      console.log('join success', _)\n      return this.router.navigate('shipments')\n    })\n    .catch(err => {\n      this.snackbar.show('Join failed: '+err.reason)\n    })\n  }\n}\n","import {inject} from 'aurelia-framework'\nimport {Router} from 'aurelia-router'\nimport {Db}     from '../libs/pouch'\n\n@inject(Db, Router)\nexport class login {\n\n  constructor(db, router){\n    this.db       = db\n    this.router   = router\n    this.email    = 'oregon@sirum.org'\n    this.password = ''\n  }\n\n  login() {\n    this.db.user.session.post({email:this.email, password:this.password})\n    .then(loading => {\n      this.disabled = true\n\n      //wait for all resources except 'drugs' to sync\n      this.loading  = loading.resources\n      this.progress = loading.progress\n\n      return Promise.all(loading.syncing)\n    })\n    .then(resources => {\n      this.router.navigate('shipments')\n    })\n    .catch(err => {\n      this.disabled = false\n      console.log(err)\n      this.snackbar.show('Login failed: '+err.reason)\n    })\n  }\n}\n","//TODO\n//Autofocus on new drug\n//Disable From/To based on Filter's switch\n\nimport {inject}     from 'aurelia-framework';\nimport {Router}     from 'aurelia-router';\nimport {Db}         from '../libs/pouch'\nimport {HttpClient} from 'aurelia-http-client';\n\n//@pageState()\n@inject(Db, Router, HttpClient)\nexport class records {\n\n  constructor(db, router, http){\n    this.db      = db\n    this.router  = router\n    this.http    = http\n    this.history = ''\n    this.days    = []\n    this.scroll  = this.scroll.bind(this)\n\n    let today  = new Date();\n    let start  = new Date(2016, 7, 1)\n\n    while (today > start) {\n      today.setHours(-24)\n      this.days.push(today.toJSON().slice(0, 10))\n    }\n  }\n\n  deactivate() {\n    removeEventListener('keyup', this.scroll)\n  }\n\n  activate(params) {\n    addEventListener('keyup', this.scroll)\n    this.db.user.session.get().then(session => {\n      this.account = session.account //this is not a full account, just an _id\n      this.selectDay(params._id) //TODO save day in parameter for browser reloads\n    })\n  }\n\n  selectDay(day) {\n    this.day = day || this.days[0]\n    this.router.navigate('records/'+this.day, { trigger: false })\n\n    //Just in case the user inverts the to & from dates.\n    // let from = fromDate <= toDate ? fromDate : toDate\n    // let to   = fromDate > toDate ? fromDate : toDate\n    let to = new Date(this.day)\n    to.setHours(24*2)\n\n    //Do not show inventory $eq, $lt, $gt,\n    let query = {'shipment._id':{$ne:this.account._id}, createdAt:{$gte:this.day, $lte:to.toJSON().slice(0, 10)}}\n\n    return this.db.transaction.get(query).then(transactions => {\n      this.transactions = transactions\n      return this.selectTransaction()\n    })\n  }\n\n  scroll($event) {\n    let index = this.transactions.indexOf(this.transaction)\n    let last  = this.transactions.length - 1\n\n    if ($event.which == 38) //Keyup\n      this.selectTransaction(this.transactions[index > 0 ? index - 1 : last])\n\n    if ($event.which == 40) //keydown\n      this.selectTransaction(this.transactions[index < last ? index+1 : 0])\n  }\n//this.http.get('//localhost:3000/transactions/'+transaction._id+'/history')\n  //Activated from constructor and each time a transaction is selected\n  selectTransaction(transaction) {\n    this.transaction = transaction || this.transactions[0]\n\n    if ( ! this.transaction) return\n    \n    this.db.transaction.get({_id:this.transaction._id}, {history:true})\n    .then(history => {\n      //TODO move this to /history?text=true. Other formatting options?\n      function id(k,o) {\n        //console.log(o, typeof o)\n        if (Array.isArray(o))\n          return o\n        return o.shipment.from.name+' '+o._id\n      }\n      //console.log('history', JSON.stringify(history.content, id, \"*\"))\n      function pad(word) {\n        return (word+' '.repeat(25)).slice(0, 25)\n      }\n      this.history = JSON.stringify(\n        history,\n        (k,v) => {\n          if (Array.isArray(v))\n            return v\n\n            let status = this.status || 'pickup' //Might not be initialized yet\n            let href   = '/#/shipments/'+v.shipment._id\n\n            return pad('From: '+v.shipment.account.from.name)+pad('To: '+v.shipment.account.to.name)+\"<a href='\"+href+\"'>\"+v.type+\" <i class='material-icons' style='font-size:12px; vertical-align:text-top; padding-top:1px'>exit_to_app</i></a><br>\"+\n                   pad(v.shipment.account.from.street)+pad(v.shipment.account.to.street)+'Date '+v.createdAt.slice(2, 10)+'<br>'+\n                   pad(v.shipment.account.from.city+', '+v.shipment.account.from.state+' '+v.shipment.account.from.zip)+pad(v.shipment.account.to.city+', '+v.shipment.account.to.state+' '+v.shipment.account.to.zip)+'Quantity '+(v.qty.to || v.qty.from)\n        },\n        \"   \"\n      )\n      .replace(/\\[\\n?\\s*/g, \"<div style='margin-top:-12px'>\")\n      .replace(/\\n?\\s*\\],?/g, '</div>')\n      .replace(/ *\"/g, '')\n      .replace(/\\n/g, '<br><br>')\n      //console.log('history', JSON.stringify(this.history))\n    })\n  }\n\n  exportCSV() {\n\n  }\n}\n\nexport class filterValueConverter {\n  toView(days = [], filter = ''){\n    return days.filter(day => ~ day.indexOf(filter))\n  }\n}\n","//@pageState()\nexport class App {\n\n  configureRouter(config, router){\n    config.title = 'SIRUM';\n    config.addPipelineStep('authorize', AuthorizeStep);\n\n    config.map([\n      { route: 'login',                            moduleId: 'views/login',     title:'Login',     nav:true},\n      { route: ['join'],                           moduleId: 'views/join',      title:'Join',      nav:true},\n      { route: ['inventory', 'inventory/:id'],     moduleId: 'views/inventory', title:'Inventory', nav:true, roles:[\"user\"]},\n      { route: ['shipments', 'shipments/:id', ''], moduleId: 'views/shipments', title:'Shipments', nav:true, roles:[\"user\"]},\n      { route: ['drugs', 'drugs/:id'],             moduleId: 'views/drugs',     title:'Drugs',     nav:true, roles:[\"user\"]},\n      { route: ['records', 'records/:id'],         moduleId: 'views/records',   title:'Records',   nav:true, roles:[\"user\"]},\n      { route: 'account',                          moduleId: 'views/account',   title:'Account',   nav:true, roles:[\"user\"]}\n    ])\n    this.router = router\n  }\n}\n\nimport {inject}   from 'aurelia-framework'\nimport {Db}       from '../libs/pouch'\nimport {Router, Redirect} from 'aurelia-router'\n\n@inject(Router, Db)\nexport class AuthorizeStep {\n  constructor(router, db){\n    this.db = db\n    //Unfortunately on browser reload run method is not called\n    //so if session has expired we need to check here as well\n    if ( ! document.cookie)\n      router.navigate('login')\n  }\n\n  run(routing, nextStep) {\n    //Run must return a promise of a navigation route.  i.e., Second parameter is not a pure callback\n    return this.db.user.session.get().then(session => {\n      let next = routing.getAllInstructions()[0].config\n      for (let route of routing.router.navigation) {\n        if ( ! session || ! session.account) {\n          route.isVisible = ! route.config.roles; continue\n        }\n        let role = session.account._id.length == 7 ? 'user' : 'admin'\n        route.isVisible = route.config.roles && ~route.config.roles.indexOf(role)\n      }\n\n      if (next.navModel.isVisible) return nextStep()\n      let redirect = new Redirect(next.navModel.config.roles ? 'login' : 'shipments')\n      return nextStep.cancel(redirect)\n    })\n    .catch(err => console.log('router error', err))\n  }\n}\n","import {inject}     from 'aurelia-framework'\nimport {Router}     from 'aurelia-router'\nimport {Db}         from '../libs/pouch'\nimport {HttpClient} from 'aurelia-http-client'\nimport {Csv}        from '../libs/csv'\n\n//@pageState()\n@inject(Db, Router, HttpClient)\nexport class shipments {\n\n  constructor(db, router, http){\n    this.csv    = new Csv(['drug._id'], ['qty.from', 'qty.to', 'exp.from', 'exp.to', 'rx.from', 'rx.to', 'verifiedAt'])\n    this.db     = db\n    this.drugs  = []\n    this.router = router\n    this.http   = http\n    this.stati  = ['pickup', 'shipped', 'received']\n    this.shipments = {}\n  }\n\n  activate(params) {\n    return this.db.user.session.get()\n    .then(session  => {\n      this.user = session._id\n      return this.db.account.get({_id:session.account._id})\n    })\n    .then(accounts => {\n      this.account = {_id:accounts[0]._id, name:accounts[0].name}\n      this.ordered = {[accounts[0]._id]:accounts[0].ordered}\n      return Promise.all([\n        //Start all of our async tasks\n        this.db.account.get({authorized:accounts[0]._id}),\n        this.db.account.get({_id:{$gt:null, $in:accounts[0].authorized}}),\n        this.db.shipment.get({'account.from._id':accounts[0]._id}), //TODO this should be duplicative with _security doc.  We should be able to do _all_docs or no selector\n        this.db.shipment.get({'account.to._id':accounts[0]._id})\n      ])\n    })\n    .then(([fromAccounts, toAccounts, fromShipments, toShipments]) => {\n      //This abbreviated denormalized account information will be assigned to account.to/from\n      let selected, fromMap = {}, toMap = {}\n      let makeMap = (map, account) => {\n        map[account._id] = {_id:account._id, name:account.name}\n        this.ordered[account._id] = account.ordered\n      }\n\n      for (let account of fromAccounts) makeMap(fromMap, account)\n      for (let account of toAccounts) makeMap(toMap, account)\n\n      this.accounts  = {\n        from:['', ...Object.keys(fromMap).map(key => fromMap[key])],\n        to:['', ...Object.keys(toMap).map(key => toMap[key])]\n      }\n\n      //Selected account != shipment.account.to because they are not references\n      let makeReference = shipment => {\n        this.setStatus(shipment)\n\n        //3 scenarios - from an approved partner, the current facility, from a previous approved partner\n        //TODO this code seems bulks is there a more elegant way to handle these three scenarios\n        if (toMap[shipment.account.from._id])\n          shipment.account.from = toMap[shipment.account.from._id]\n\n        if (fromMap[shipment.account.to._id])\n          shipment.account.to = fromMap[shipment.account.to._id]\n\n        if (params.id === shipment._id)\n          selected = shipment  //Sneak this in since we are already making the loop\n      }\n      fromShipments.forEach(makeReference)\n\n      this.role = selected //switch default role depending on shipment selection\n        ? {account:'from', partner:'to'}\n        : {account:'to', partner:'from'}\n\n      toShipments.forEach(makeReference)\n\n      //console.log('this.accounts', this.accounts)\n      this.shipments = {from:fromShipments, to:toShipments}\n\n      this.selectShipment(selected)\n    })\n  }\n\n  //Activated by activate() and each time a shipment is selected from drawer\n  selectShipment(shipment, toggleDrawer) {\n    if (toggleDrawer)\n      document.querySelector('.mdl-layout__header').firstChild.click()\n\n    if ( ! shipment) return this.emptyShipment()\n    this.setUrl('/'+shipment._id)\n    this.setShipment(shipment)\n    this.setTransactions(shipment._id)\n  }\n\n  emptyShipment() {\n    this.setUrl('')\n    if (this.role.account == 'from') {\n      this.setShipment({account:{from:this.account, to:{}}})\n      this.setTransactions(this.account._id)\n    } else {\n      this.setShipment({account:{to:this.account, from:{}}})\n      this.setTransactions()\n    }\n  }\n\n  setShipment(shipment) {\n    this.shipment     = shipment\n    this.shipmentId   = shipment._id  //freeze this if user started playing with \"move shipment\" select\n    this.attachment   = null\n  }\n\n  setUrl(url) {\n    this.router.navigate('shipments'+url, { trigger: false})\n  }\n\n  setTransactions(shipmentId) {\n    this.transactions = []\n    this.diffs        = [] //Newly checked or unchecked checkboxes. Used to disable buttons if user has not done anything yet\n\n    if ( ! shipmentId) return\n\n    this.db.transaction.get({'shipment._id':shipmentId}).then(transactions => {\n      this.transactions = transactions\n      this.originalTransactions = transactions\n      let verified //do not autocheck past the point where someone has inventoried\n      for (let i in this.transactions) {\n        let transaction = this.transactions[i]\n        transaction.isChecked = transaction.verifiedAt\n        if (transaction.verifiedAt)\n          verified = true\n        else if ( ! verified)\n          this.autoCheck(i, false)\n      }\n    })\n    .catch(console.log)\n  }\n\n  setStatus(shipment) {\n    shipment.status = this.stati.reduce((prev, curr) => shipment[curr+'At'] ? curr : prev)\n  }\n\n  swapRole() { //Swap donor-donee roles\n    [this.role.account, this.role.partner] = [this.role.partner, this.role.account]\n    this.selectShipment()\n    return true\n  }\n\n  //Save the donation if someone changes the status/date\n  saveShipment() {\n    //don't want to save status, but deleting causes weird behavior\n    //so instead copy the shipment and delete from copy then assign new rev\n    delete this.shipment.status\n    return this.db.shipment.put(this.shipment).then(res => {\n      this.setStatus(this.shipment)\n    })\n    //TODO reschedule pickup if a date was changed\n  }\n\n  //Move these items to a different \"alternative\" shipment then select it\n  //TODO need to select the new shipment once user confirms the move\n  moveTransactionsToShipment(shipment) {\n    //Change all selected transactions to the new or existing shipment\n    Promise.all(this.transactions.map(transaction => {\n      //do not allow movement of verified transactions\n      if ( ! transaction.isChecked || transaction.verifiedAt) return\n\n      transaction.shipment = {_id:shipment._id}\n      return this.db.transaction.put(transaction)\n    }))\n    .then(_ => this.selectShipment(shipment)) //Display existing shipment or the newly created shipment\n  }\n\n  //Create shipment then move inventory transactions to it\n  createShipment() {\n    if (this.shipment.tracking == 'New Tracking #')\n      delete this.shipment.tracking\n\n    this.db.shipment.post(this.shipment).then(res => {\n      this.setStatus(this.shipment)\n      this.shipments[this.role.account].unshift(this.shipment)\n      this.moveTransactionsToShipment(this.shipment)\n    })\n  }\n\n  expShortcuts($event, $index) {\n    if ($event.which == 37 || $event.which == 39 || $event.which == 9)\n      return true //ignore left and right arrows and tabs to prevent unnecessary autochecks https://css-tricks.com/snippets/javascript/javascript-keycodes/\n\n    if ($event.which == 13) {//Enter should focus on quantity\n      document.querySelector('#qty_'+$index+' input').focus()\n      return false\n    }\n\n    //See if this transaction qualifies for autoCheck\n    this.autoCheck($index, true)\n\n    return true\n  }\n\n  qtyShortcuts($event, $index) {\n    if ($event.which == 13) { //Enter should focus on rx_input, unless it is hidden http://stackoverflow.com/questions/19669786/check-if-element-is-visible-in-dom\n      let boxInput = document.querySelector('#box_'+$index+' input')\n      boxInput.disabled ? document.querySelector('md-autocomplete input').focus() : boxInput.focus()\n      return false\n    }\n\n    setTimeout(_ => { //keydown means that input has not changed yet.  keyup can't be canceled\n\n      if ($event.which == 37 || $event.which == 39 || $event.which == 9)\n        return //ignore left and right arrows and tabs to prevent unnecessary autochecks https://css-tricks.com/snippets/javascript/javascript-keycodes/\n\n      //Delete an item in the qty is 0.  Instead of having a delete button\n      let transaction = this.transactions[$index]\n      let doneeDelete = ! transaction.qty.from && transaction.qty.to === 0\n      let donorDelete = ! transaction.qty.to   && transaction.qty.from === 0\n\n      if (donorDelete || doneeDelete) {\n        this.drugs = [] //get rid of previous results since someone might press enter and accidentally readd the same drug\n        this.db.transaction.delete(transaction).then(_ =>  {\n          this.transactions.splice($index, 1)\n          this.diffs = this.diffs.filter(i => i != $index).map(i => i > $index ? i-1 : i)\n        })\n        document.querySelector('md-autocomplete input').focus()\n      }\n\n      //See if this transaction qualifies for autoCheck\n      this.autoCheck($index, true)\n    })\n\n    return true\n  }\n\n  boxShortcuts($event, $index) {\n    if ($event.which == 13) {//Enter should focus on quantity\n      console.log('')\n      document.querySelector('md-autocomplete input').focus()\n      return false\n    }\n\n    if ($event.which == 107 || $event.which == 187) { // + key on numpad, keyboard\n      let box = document.querySelector('#box_'+$index+' input')\n      box.value = box.value[0]+(+box.value.slice(1)+1)\n      return false //don't actually add the +\n    }\n\n    if ($event.which == 109 || $event.which == 189) {// - key on numpad, keyboard\n      let box = document.querySelector('#box_'+$index+' input')\n      box.value = box.value[0]+(+box.value.slice(1)-1)\n      return false //don't actually add the -\n    }\n\n    return true\n  }\n\n  saveLastBox($event, $index) {\n    this.lastBox = $event.target.value\n    this.saveTransaction($index)\n  }\n\n  // rxShortcuts($event, $index) {\n  //   if ($event.which == 13) {//Enter should refocus on the search\n  //     document.querySelector('#box_'+$index+' input').focus()\n  //     return false\n  //   }\n  //\n  //   return true\n  // }\n\n  //TODO should this only be run for the recipient?  Right now when donating to someone else this still runs and displays order messages\n  autoCheck($index, userInput) {\n    let transaction = this.transactions[$index]\n\n    let ordered = this.ordered[this.shipment.account.to._id][transaction.drug.generic]\n    let qty = +transaction.qty[this.role.account]\n    let exp = transaction.exp[this.role.account]\n\n    if ( ! ordered || ! qty) return\n\n    let price      = transaction.drug.price.goodrx || transaction.drug.price.nadac || 0\n    let defaultQty = price > 1 ? 1 : 10 //keep expensive meds\n    let minQty     = qty >= (+ordered.minQty || defaultQty)\n    let minExp     = exp ? new Date(exp) - Date.now() >= (ordered.minDays || 120)*24*60*60*1000 : !ordered.minDays\n    let isChecked  = transaction.isChecked || false //apparently false != undefined\n\n    if((minQty && minExp) == isChecked) {\n      userInput && ordered.destroyedMessage && this.snackbar.show(ordered.destroyedMessage)\n      return userInput && console.log('minQty', minQty, qty, 'minExp', minExp, exp)\n    }\n\n    if ( ! isChecked) //manual check has not switched the boolean yet\n      userInput && this.snackbar.show(ordered.verifiedMessage || 'Drug is ordered')\n\n    if (userInput) //don't do this on initial page load\n      transaction.location = this.lastBox\n\n    this.manualCheck($index)\n  }\n\n  manualCheck($index) {\n    this.transactions[$index].isChecked = ! this.transactions[$index].isChecked\n\n    let j = this.diffs.indexOf($index)\n    ~ j ? this.diffs.splice(j, 1)\n      : this.diffs.push($index)\n  }\n\n  saveInventory() {\n    let method   = 'post'\n    let verified = true\n    let phrase   = 'saved to'\n    if (this.transactions[this.diffs[0]].verifiedAt) {\n      method   = 'delete'\n      verified = null\n      phrase   = 'removed from'\n    }\n\n    Promise.all(this.diffs.map(i => {\n      return this.db.transaction.verified[method](this.transactions[i])\n      .then(_ => {\n        this.transactions[i].verifiedAt = verified\n        return true\n      })\n      .catch(err => {\n        this.transactions[i].isChecked = this.transactions[i].verifiedAt\n        this.manualCheck(i)\n        this.snackbar.show(err.reason)\n      })\n    })).then(all => {\n      this.diffs = []\n      if (all.every(i => i))\n        this.snackbar.show(`${all.length} items were ${phrase} inventory`)\n    })\n  }\n\n  search() {\n    let term = this.term.trim()\n\n    if (term.length < 3) {\n      this.transactions = this.originalTransactions\n      return this.drugs = []\n    }\n\n    if (/^[\\d-]+$/.test(term)) {\n      this.regex = RegExp('('+term+')', 'gi')\n      var drugs  = this.db.drug.get({ndc:term})\n    } else {\n      this.regex = RegExp('('+term.replace(/ /g, '|')+')', 'gi')\n      var drugs  = this.db.drug.get({generic:term})\n    }\n\n    this._search = drugs.then(drugs => {\n      this.drugs     = drugs\n      this.index     = 0\n    })\n  }\n\n  //Enter in the autocomplete adds the selected transaction\n  //TODO support up/down arrow keys to pick different transaction?\n  scrollDrugs($event) {\n    //group won't be a reference so we must search manually\n    let last = this.drugs.length - 1\n\n    if ($event.which == 38) //Arrow up\n      this.index = this.index > 0 ? this.index - 1 : last\n\n    if ($event.which == 40 )//Arrow down\n      this.index = this.index < last ? this.index+1 : 0\n\n    //Enter with a selected drug.  Force term to be falsey so a barcode scan which is entering digits does not trigger\n    if ($event.which == 13) {//Barcode scan means search might not be done yet\n      Promise.resolve(this._search).then(_ => this.addTransaction(this.drugs[this.index]))\n      return false //Enter was also triggering exp to qty focus\n    }\n\n    if ($event.which == 106) //* clearing autocomplete field with an asterick (to match exp date clearing and make numberpad compatible)\n      this.term = \"\"\n\n    return true  //still allow typing into autocomplete\n  }\n\n  //Since this is triggered by a focusin and then does a focus, it activates itself a 2nd time\n  selectRow($index) {\n    document.querySelector('#exp_'+$index+' input').focus()\n  }\n\n  saveTransaction($index) {\n    Promise.resolve(this._saveTransaction).then(_ => {\n\n      if ( ! document.querySelector('#exp_'+$index+' input').validity.valid)\n        return true\n\n      console.log('saveTransaction', this.transactions[$index])\n      this._saveTransaction = this.db.transaction.put(this.transactions[$index])\n      .catch(err => {\n        this.snackbar.show(`Error saving transaction: ${err.reason || err.message }`) //message is for pouchdb errors\n      })\n    })\n\n    return true\n  }\n\n  addTransaction(drug, transaction) {\n\n    if ( ! drug)\n      return this.snackbar.show(`Cannot find drug matching this search`)\n\n    transaction = transaction || {\n      qty:{from:null, to:null},\n      rx:{from:null, to:null},\n      exp:{\n        from:this.transactions[0] ? this.transactions[0].exp.from : null,\n        to:this.transactions[0] ? this.transactions[0].exp.to : null\n      }\n    }\n\n    transaction.drug = {\n      _id:drug._id,\n      brand:drug.brand,\n      generics:drug.generics,\n      form:drug.form,\n      price:drug.price,\n      pkg:drug.pkg\n    }\n\n    transaction.shipment = {\n      _id:this.shipment._id\n    }\n\n    transaction.user = {\n      _id:this.user\n    }\n\n    this.term = '' //Reset search's auto-complete\n\n    //Assume db query works.\n    console.log('addTransaction', transaction)\n    this.transactions.unshift(transaction) //Add the drug to the view\n    this.diffs = this.diffs.map(val => +val+1) //for some reason indexes were strings\n    let start = Date.now()\n    return this.db.transaction.post(transaction).then(_ => {\n      let ordered    = this.ordered[this.shipment.account.to._id][transaction.drug.generic]\n      let pharmerica = /pharmerica.*/i.test(this.shipment.account.from.name)\n\n      if ( !  ordered && pharmerica ) //Kiah's idea of not making people duplicate logs for PharMerica, saving us some time\n        return this.snackbar.show(`Destroy, record already exists`)\n\n      console.log('ordered transaction added in', Date.now() - start)\n      setTimeout(_ => this.selectRow(0), 50) // Select the row.  Wait for repeat.for to refresh (needed for dev env not live)\n    })\n    .catch(err => {\n      console.log(JSON.stringify(transaction), err)\n      this.snackbar.show(`Transaction could not be added: ${err.name}`)\n      this.transactions.shift()\n      this.diffs = this.diffs.map(val => val-1)\n    })\n  }\n\n  exportCSV() {\n    let name = this.shipment._id ? 'Shipment '+this.shipment._id+'.csv' : 'Inventory.csv'\n    this.csv.unparse(name, this.transactions.map(transaction => {\n      return {\n        '':transaction,\n        'drug._id':\" \"+transaction.drug._id,\n        'drug.generics':transaction.drug.generics.map(generic => generic.name+\" \"+generic.strength).join(';'),\n        shipment:this.shipment\n      }\n    }))\n  }\n\n  importCSV() {\n    console.log('this.$file.value', this.$file.value)\n    this.csv.parse(this.$file.files[0]).then(parsed => {\n      return Promise.all(parsed.map(transaction => {\n        this.$file.value = ''\n        transaction.exp.to     = toJsonDate(parseUserDate(transaction.exp.to))\n        transaction.exp.from   = toJsonDate(parseUserDate(transaction.exp.from))\n        transaction.verifiedAt = toJsonDate(parseUserDate(transaction.verifiedAt))\n        return this.db.drug.get({_id:transaction.drug._id}).then(drugs => {\n          //This will add drugs upto the point where a drug cannot be found rather than rejecting all\n          if (drugs[0]) return {drug:drugs[0], transaction}\n          throw 'Cannot find drug with _id '+transaction.drug._id\n        })\n      }))\n    })\n    .then(rows => {\n      console.log('rows', rows)\n      return Promise.all(rows.map(row => this.addTransaction(row.drug, row.transaction)))\n    })\n    .then(_ => this.snackbar.show('All Transactions Imported'))\n    .catch(err => this.snackbar.show('Transactions not imported: '+err))\n  }\n\n  // setAttachment(attachment) {\n  //   attachment._id  = this.attachment.name\n  //   attachment._rev = this.shipment._rev\n  //   this.db.shipment.attachment.put({_id:this.shipment._id, attachment:attachment})\n  //   .then(res => {\n  //     this.shipment._rev   = res.rev\n  //     this.attachment.type = attachment.type\n  //     //TODO use service worker to rename this URL so title bar isn't nasty\n  //     //http://stackoverflow.com/questions/283956/is-there-any-way-to-specify-a-suggested-filename-when-using-data-uri\n  //     this.attachment.url  = URL.createObjectURL(attachment)\n  //     console.log('setAttachment', attachment, _)\n  //   })\n  // }\n  //\n  // getAttachment() {\n  //   this.db.shipment.attachment.get({_id:this.shipment._id, name:this.attachment.name})\n  //   .then(attachment => {\n  //     this.attachment.type = attachment.type\n  //     this.attachment.url  = URL.createObjectURL(attachment)\n  //     console.log('getAttachment', attachment, this.attachment.url)\n  //   })\n  //   .catch(this.attachment.url = null)\n  // }\n}\n\n//\n// Value Converters\n//\nexport class numberValueConverter {\n  fromView(str){\n    //Match servers transaction.js default: Empty string -> null, string -> number, number -> number (including 0)\n    return str != null && str !== '' ? +str : null\n  }\n}\n\nexport class jsonValueConverter {\n  toView(object = null){\n    //console.log(Object.keys(object), JSON.stringify(object, null, \" \"))\n    return JSON.stringify(object, null, \" \")\n  }\n}\n\nexport class filterValueConverter {\n  toView(shipments = [], filter = ''){\n    filter = filter.toLowerCase()\n    return shipments.filter(shipment => {\n      return ~ `${shipment.account.from.name} ${shipment.account.to.name} ${shipment.tracking} ${shipment.status}`.toLowerCase().indexOf(filter)\n    })\n  }\n}\n\nexport class valueValueConverter {\n  toView(transactions = [], decimals, trigger) {\n    transactions = Array.isArray(transactions) ? transactions : [transactions]\n\n    return transactions.reduce((total, transaction) => {\n      if ( ! transaction.drug.price || ! transaction.qty) return 0\n      let price = transaction.drug.price.goodrx || transaction.drug.price.nadac || 0\n      let   qty = transaction.qty.to || transaction.qty.from || 0\n      return total + qty * price\n    }, 0).toFixed(decimals)\n  }\n}\n\nexport class boldValueConverter {\n  toView(text, bold){\n    if ( ! bold) return text\n    bold = RegExp('('+bold.replace(/ /g, '|')+')', 'gi')\n    return text.replace(bold, '<strong>$1</strong>')\n  }\n}\n\nexport class dateValueConverter {\n\n  toView(date) {\n    if ( ! date ) return ''\n    return date != this.model ? date.slice(5,7)+'/'+date.slice(2,4) : this.view\n  }\n\n  fromView(date){\n    let add = date.includes('+') || date.includes('=')\n    let sub = date.includes('-')\n    let {month, year} = parseUserDate(date.replace(/\\+|\\-|\\=/g, ''))\n\n    if (add) month++\n    if (sub) month--\n\n    if (month == 0) {\n      month = 12\n      year--\n    }\n\n    if (month == 13) {\n      month = 1\n      year++\n    }\n\n    //Keep zerp padding in front of the month which is lost when month changes\n    this.view  = (\"00\"+month).slice(-2)+'/'+year\n\n    return this.model = toJsonDate({month, year})\n  }\n}\n\n//whether mm/yy or mm/dd/yy, month is always first and year is always last\nfunction parseUserDate(date) {\n  date = date.split('/')\n  return {\n    year:date.pop(),\n    month:date.shift()\n  }\n}\n\n//To get last day in month, set it to next month and subtract a day\nfunction toJsonDate({month, year}) {\n  let date = new Date('20'+year,month, 1)\n  date.setDate(0)\n  return date.toJSON()\n}\n","export {Csv}\n","export default {\n  debug: true,\n  testing: true\n};\n","export {Db}\n","export default {\n  debug: true,\n  testing: true\n};\n","export default {\n  debug: true,\n  testing: true\n};\n","//http://stackoverflow.com/questions/32017532/observe-property-on-an-array-of-objects-for-any-changes\nexport class ArrayBindingBehavior {\n  bind(binding, source, parameter) {\n    binding.standardObserveProperty = binding.observeProperty\n    binding.observeProperty = function(obj, property) {\n      this.standardObserveProperty(obj, property)\n      let value = obj[property]\n      if (Array.isArray(value)) {\n        this.observeArray(value)\n        if (parameter) {\n          for(let each of value) {\n            this.standardObserveProperty(each, parameter)\n          }\n        }\n      }\n    }\n  }\n\n  unbind(binding, source) {\n    binding.observeProperty = binding.standardObserveProperty\n    binding.standardObserveProperty = null\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {Db}     from '../libs/pouch'\nimport {Router} from 'aurelia-router';\n\n@inject(Db, Router)\nexport class inventory {\n\n  constructor(db, router){\n    this.db      = db\n    this.session =\n    this.router  = router\n    this.scrollGroups = this.scrollGroups.bind(this)\n  }\n\n  deactivate() {\n    removeEventListener('keyup', this.scrollGroups)\n  }\n\n  activate(params) {\n    addEventListener('keyup', this.scrollGroups)\n    return this.db.user.session.get().then(session => {\n      this.account = session.account._id\n\n      if ( ! params.id) {\n        return this.selectGroup(null, true)\n      }\n      //TODO repackagedAt == null\n      return this.db.transaction.get({ndc:params.id, 'shipment._id':this.account}).then(drugs => {\n        this.selectDrug(drugs[0], true)\n      })\n    })\n  }\n\n  scrollGroups($event) {\n    //group won't be a reference so we must search manually\n    let index = this.groups.map(group => group.name).indexOf(this.group.name)\n    this.scrollSelect($event, index, this.groups, group => this.selectGroup(group, true))\n\n    if ($event.which == 13) { //Enter get rid of the results\n      document.querySelector('md-autocomplete input').blur()\n    }\n\n    $event.stopPropagation() //scrolling groups doesn't need to scroll drugs as well\n  }\n\n  scrollDrugs($event) {\n    let index = this.group.drugs.indexOf(this.drug)\n    this.scrollSelect($event, index, this.group.drugs, drug => this.selectDrug(drug))\n  }\n\n  scrollSelect($event, index, list, cb, autoselect) {\n\n    let last  = list.length - 1\n\n    if ($event.which == 38) //Keyup\n      cb(list[index > 0 ? index - 1 : last])\n\n    if ($event.which == 40) //keydown\n      cb(list[index < last ? index+1 : 0])\n  }\n\n  selectGroup(group, autoselectDrug) {\n    this.mode = false\n\n    group = group || this.search().then(_ => {\n      return this.groups[0] || {drugs:[]}\n    })\n\n    Promise.resolve(group).then(group => {\n      this.term  = group.name\n      this.group = group\n\n      //TODO if this was called by selectDrug then we should establish establish a reference\n      //between the approriate this.group.drugs and this.drug so that changes to the drug\n      //appear in realtime on the right hand side.  This works if selectGroup\n      if (autoselectDrug)\n        this.selectDrug(group.drugs[0])\n    })\n  }\n\n  selectDrug(drug = {transactions:[{}]}, autoselectGroup) {\n\n    this.drug = drug\n\n    let url = 'inventory'\n    if (drug.transactions[0].drug) {\n      url = 'inventory/'+drug.transactions[0].drug._id\n      this.db.drug.get({_id:drug.transactions[0].drug._id})\n      .then(drugs => this.image = drugs[0].image)\n    }\n\n    this.router.navigate(url, { trigger: false })\n\n    if (autoselectGroup)\n      this.selectGroup()\n  }\n\n  search() {\n\n    let term = (this.term || '').trim()\n\n    if (term.length < 3)\n      return Promise.resolve(this.groups = [])\n\n    //TODO make this an Rx search instead.  Also look up ndc in drug db to get generic name then do generic search\n    if (/^[\\d-]+$/.test(term)) {\n      // this.regex = RegExp('('+term+')', 'gi')\n      // var transactions = this.db.transaction.get({ndc:term, 'shipment._id':this.account})\n    } else {\n      this.regex = RegExp('('+term.replace(/ /g, '|')+')', 'gi')\n      var transactions = this.db.transaction.get({generic:term})\n    }\n\n    let groups = {}\n    return transactions.then(transactions => {\n      console.log(transactions)\n      for (let transaction of transactions) {\n        let generic = transaction.drug.generic\n        let _id     = transaction.drug._id\n        groups[generic] = groups[generic] || {name:generic, drugs:{}}\n        groups[generic].drugs[_id] = groups[generic].drugs[_id] || {total:0, transactions:[]}\n        groups[generic].drugs[_id].total += transaction.qty.from\n        groups[generic].drugs[_id].transactions.push(transaction)\n      }\n      console.log(groups)\n      this.groups = Object.keys(groups).map(key => {\n        let group = groups[key]\n        group.drugs = Object.keys(group.drugs).map(key => {\n          group.drugs[key].transactions.sort((a, b) => {\n            let aExp = a.exp.from || ''\n            let bExp = b.exp.from || ''\n            let aBox = a.location || ''\n            let bBox = b.location || ''\n            let aQty = a.qty.from || ''\n            let bQty = b.qty.from || ''\n\n            if (aBox > bBox) return -1\n            if (aBox < bBox) return 1\n            if (aExp < bExp) return -1\n            if (aExp > bExp) return 1\n            if (aQty > bQty) return -1\n            if (aQty < bQty) return 1\n            return 0\n          })\n          return group.drugs[key]\n        })\n        return group\n      })\n    })\n  }\n\n  toggleRepack() {\n    this.mode = ! this.mode\n    this.repack = this.drug.transactions.map(s => s.qty.from)\n    this.sumRepack()\n    return true\n  }\n\n  //ValueConverter wasn't picking up on changes so trigger manually\n  //For some reason input[type=number] doesn't save as a number\n  //not sure if this is an html of aurelia bug\n  sumGroup() {\n    this.drugs.total = this.drugs.transactions.reduce((a,b) => a + (+b.qty.from || 0), 0)\n  }\n\n  sumRepack() {\n    this.repack.total = this.repack.reduce((a,b) => (+a)+(+b), 0)\n  }\n\n  saveTransaction(transaction) {\n    console.log('saving', transaction)\n    this.db.transaction.put(transaction)\n    .catch(e => this.snackbar.show({\n       message: `Transaction with exp ${transaction.exp[this.role.account]} and qty ${transaction.qty[this.role.account]} could not be saved`,\n     }))\n  }\n\n//TODO don't bind when repacking so that you can skip and change things to get to 30\n//Skip over and dont delete items that have a repack quantity of 0\n  repackage() {\n    let all   = []\n    let exp   = null\n    let trans = {\n      _id:undefined,\n      _rev:undefined,\n      qty:{from:0, to:0},\n      lot:{from:null, to:null},\n      exp:{from:Infinity, to:Infinity}, //JSON.stringify will convert these to null if neccessary\n      history:[]\n    }\n\n    trans = Object.assign({}, this.drug.transactions[0], trans)\n    //Go backwards since we are deleting array vals as we go\n    for (let i=this.repack.length-1; i>=0; i--) {\n      let qty = +this.repack[i]\n      let src = this.drug.transactions[i]\n\n      //Falsey quantity such as null, \"\", or 0 should mean skip this source\n      //Do not allow items to be repackaged a 2nd time with a partial quantity\n      //because we don't know by how much to reduce each of the original qtys\n      if ( ! qty || (src.qty.from != qty && src.history.length >1))\n        continue\n\n      trans.qty.from += qty\n\n      if (src.qty.from == qty) {\n        trans.history.push(...src.history)\n        this.drug.transactions.splice(i, 1) //assume delete is successful\n        all.push(this.db.transaction.delete(src))\n      } else { //cannot take partial quantity from repackaged drug, so history must have length <= 1\n        if (src.history.length == 1) {\n          let [{transaction}] = src.history\n          trans.history.push({transaction, qty})\n        }\n        src.qty.from -= qty\n        all.push(this.db.transaction.put(src))\n      }\n\n      if (src.exp.from)\n        trans.exp.from = Math.min(trans.exp.from, new Date(src.exp.from))\n    }\n\n    trans.exp.from = new Date(trans.exp.from).toJSON()\n\n    //assume add is successful.  TODO fallback code on failure\n    this.drug.transactions.unshift(trans)\n    this.mode = false\n\n    return this.db.transaction.post(trans).then(_ => Promise.all(all))\n  }\n}\n\n//TODO combine with the shipment filter with the same code\nexport class dateValueConverter {\n\n  toView(date) {\n    if ( ! date ) return ''\n    return date != this.model ? date.slice(5,7)+'/'+date.slice(2,4) : this.view\n  }\n\n  fromView(date){\n    this.view  = date\n\n    let [month, year] = date.split('/')\n    date = new Date('20'+year,month, 1)\n    date.setDate(0)\n\n    return this.model = date.toJSON()\n  }\n}\n\nexport class jsonValueConverter {\n  toView(object = null){\n    return JSON.stringify(object, null, \" \")\n  }\n}\n\nexport class numberValueConverter {\n  fromView(str){\n    return +str\n  }\n}\n\n//ADDED step of converting object to array\nexport class filterValueConverter {\n  toView(groups = [], filter = ''){\n    filter = filter.toLowerCase()\n    return groups.filter(group => {\n      return ~ genericName(group.transactions[0]).toLowerCase().indexOf(filter)\n    })\n  }\n}\n\nexport class drugNameValueConverter {\n  toView(transaction, bold){\n    let text = genericName(transaction)\n    return bold ? text.replace(RegExp('('+bold+')', 'i'), '<strong>$1</strong>') : text\n  }\n}\n\nfunction genericName(transaction) {\n  return transaction.drug.generics.map(generic => generic.name+\" \"+generic.strength).join(', ')+' '+transaction.drug.form\n}\n","import {bindable, bindingMode, inject} from 'aurelia-framework';\n\n@bindable({name:'value', defaultBindingMode: bindingMode.twoWay})\n@bindable('style')\n@bindable('options')\n@bindable('disabled')\n@bindable('default')\n@bindable('required')\n@bindable('property')\nexport class MdSelectCustomElement {\n\n  //need when toggling back and forth on shipments page to make sure from/to account disables where updated\n  disabledChanged() {\n    setTimeout(_=> this.div && this.div.MaterialTextfield.checkDisabled())\n  }\n\n  valueChanged() {\n    setTimeout(_=> this.div && this.div.MaterialTextfield.checkDirty())\n  }\n\n  attached() {\n    componentHandler.upgradeElement(this.div)\n  }\n}\n","import {bindable, bindingMode, inject} from 'aurelia-framework';\n\n@bindable({name:'value', defaultBindingMode: bindingMode.twoWay})\nexport class MdLoadingCustomElement {\n\n  valueChanged(val) {\n    setTimeout(_=> this.div && this.div.MaterialProgress.setProgress(Math.min(val, 100)))\n  }\n\n  attached() {\n    componentHandler.upgradeElement(this.div)\n  }\n}\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"sourceRoot":"../src"}