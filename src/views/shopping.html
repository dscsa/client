<template>
  <require from='client/src/elems/md-shadow'></require>
  <require from='client/src/elems/md-drawer'></require>
  <require from='client/src/elems/md-table'></require>
  <require from="client/src/elems/md-input"></require>
  <require from="client/src/elems/md-select"></require>
  <require from="client/src/elems/md-button"></require>
  <require from="client/src/elems/md-switch"></require>
  <require from="client/src/elems/md-snackbar"></require>
  <require from="client/src/elems/md-checkbox"></require>
  <require from="client/src/elems/md-autocomplete"></require>
  <require from="client/src/elems/md-menu"></require>
  <require from="client/src/elems/form"></require>

  <style>
    .mdl-button:hover { background-color:initial }
    .mdl-badge[data-badge]:after { font-size:9px; height:14px; width:14px; top:1px}
  </style>

  <section class="mdl-grid au-animate">

    <div if.bind = "!orderSelectedToShop">
      <md-input
        autoselect
        value.bind="pendedFilter"
        style="padding:0 8px; width:auto">
        Select Group
      </md-input>

      <div repeat.for="pend of pended | pendedFilter:pendedFilter">
        <div
          click.delegate="selectOrder(pend.key)"
          class="mdl-typography--title ${ term == 'Pended '+pend.key ? 'mdl-navigation__link--current' : ''}"
          style="font-size:13px; font-weight:600; cursor:pointer; color: ${pend.locked ? '#919191' : (pend.priority ? '#14c44c' : 'black')}; padding:8px">
          ${pend.key}
        </div>
      </div>
    </div>

    <div style="border:5px solid"if.bind = "orderSelectedToShop">
      <table>
        <tr><td style="padding:0"><md-input required value.bind = "shopList[shoppingIndex].basketNumber">Basket Number</td><td style="padding:0; text-align:right"><md-button color click.delegate="cancelShopping()">Cancel</md-button></td></tr>
        <tr><th>GO TO:</th></tr>
        <tr><td style="padding:0; text-align:center; font-size:30px">${shopList[shoppingIndex].bin.length == 3 ? shopList[shoppingIndex].bin : (shopList[shoppingIndex].bin.slice(0,3) + '-' + shopList[shoppingIndex].bin.slice(3,4))}</td></tr>
        <tr><td style="padding:0; text-align:center"><img
          style="height:20%;width:20%;"
          if.bind="shopList[shoppingIndex].image"
          src.bind="shopList[shoppingIndex].image"></td><tr>
        <tr><td style="padding:0">Group: ${shopList[shoppingIndex].next[0].pended.group}</td></tr>
        <tr><td style="padding:0">Item ${shoppingIndex+1} of ${shopList.length}</td></tr>
        <tr><td style="padding:0">Drug ${uniqueDrugsInOrder.indexOf(shopList[shoppingIndex].drug.generic)+1} of ${uniqueDrugsInOrder.length}</td></tr>
        <tr><td style="padding:0">${shopList[shoppingIndex].drug.generic}</td></tr>
        <tr><td style="padding:0">EXP: ${shopList[shoppingIndex].exp.to}</td></tr>
        <tr><td style="padding:0">QTY: ${shopList[shoppingIndex].qty.to}</td></tr>

        <tr><td style="padding:0"><md-checkbox name = "exact_match" click.delegate="shoppingOption('exact_match')" checked.bind="shopList[shoppingIndex].outcome.exact_match">Exact Match</md-checkbox></td></tr>
        <tr><td style="padding:0"><md-checkbox name = "roughly_equal" click.delegate="shoppingOption('roughly_equal')" checked.bind="shopList[shoppingIndex].outcome.roughly_equal">+/-3 Qty</md-checkbox></td></tr>
        <tr><td style="padding:0"><md-checkbox name = "outcomeThree" click.delegate="shoppingOption('slot_before')" checked.bind="shopList[shoppingIndex].outcome.slot_before">Slot Before</md-checkbox></td></tr>
        <tr><td style="padding:0"><md-checkbox name = "outcomeFour" click.delegate="shoppingOption('slot_after')" checked.bind="shopList[shoppingIndex].outcome.slot_after">Slot After</md-checkbox></td></tr>
        <tr><td style="padding:0"><md-checkbox name = "outcomeFive" click.delegate="shoppingOption('missing')" checked.bind="shopList[shoppingIndex].outcome.missing">Missing</md-checkbox></td></tr>

        <tr>
          <td style="padding:0"><md-button color raised show.bind="shoppingIndex>0"click.delegate="moveShoppingBackward()">Back</md-button></td>
          <td style="padding:0"><md-button color raised show.bind="formComplete" click.delegate="moveShoppingForward()">${nextButtonText}</md-button></td>
          <td style="padding:0"><md-button color='grey' raised show.bind="!formComplete" click.delegate="highlightRequired()">Complete Form</md-button></td>
        </tr>

      </table>
    </div>



    <md-snackbar ref="snackbar"></md-snackbar>

  </section>



</template>
