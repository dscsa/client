<template>
  <require from='./elems/md-shadow'></require>
  <require from='./elems/md-drawer'></require>
  <require from='./elems/md-table'></require>
  <require from="./elems/md-input"></require>
  <require from="./elems/md-select"></require>
  <require from="./elems/md-switch"></require>
  <require from="./elems/md-button"></require>
  <md-drawer>
    <md-input value.bind="filter" style="padding:0 8px; width:auto">Filter ${ type ? 'Dispositioned' : 'Received' }</md-input>
    <md-switch click.delegate="toggleType()" style="margin:-45px 0 0 197px;"></md-switch>
    <div class="mdl-grid" style="margin:0;padding:0">
    </div>
    <div style="margin:0 auto">
      <md-button raised>Export As CSV</md-button>
    </div>
  </md-drawer>
  <section class="mdl-grid au-animate">
    <div md-shadow="2" class="mdl-card mdl-cell mdl-cell--4-col">
      <div class="mdl-card__title">
        <div class="mdl-card__title-text">
          Transaction History
        </div>
      </div>
      <div innerHTML.bind="history" class="mdl-grid" style="font-size:12px; font-family:Monaco; margin:0 8px; white-space:pre-wrap; line-height:15px"></div>
    </div>
    <div md-shadow="2" class="mdl-card mdl-cell mdl-cell--8-col">
      <div class="mdl-card__title" style="margin-bottom:-52px">
        <div class="mdl-card__title-text">
          Record for
          <md-select
            style="width:auto;padding:0 5px"
            value.bind="transactionDate"
            options.bind="['pickup', 'shipped', 'received', 'verified', 'destroyed']">
          </md-select>
          in
          <md-select
            style="width:auto; padding:0 5px"
            value.bind="month"
            options.bind="months">
          </md-select>
          <md-select
            style="width:auto; padding:0"
            value.bind="year"
            options.bind="[2015,2014,2013,2012,2011,2010]">
          </md-select>
        </div>
      </div>
      <table md-table style="margin:16px; width:calc(100% - 32px)">
        <thead>
          <tr>
            <th style="text-align:left;">Drug</th>
            <th style="text-align:left;">Ndc</th>
            <th style="text-align:left; width:5%;">Exp</th>
            <th style="width:5%">Qty</th>
          </tr>
        </thead>
        <tbody>
          <tr repeat.for="transaction of transactions" class="${ $parent.transaction != transaction || 'is-selected'}" click.delegate="select(transaction)">
            <td style="text-align:left;">
              ${ transaction | drugName }
            </td>
            <td style="text-align:left;">
              ${ transaction.drug._id }
            </td>
            <td style="text-align:left;">
              ${ transaction.exp.to || transaction.exp.from }
            </td>
            <td>
              ${ transaction.qty.to || transaction.qty.from }
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</template>
