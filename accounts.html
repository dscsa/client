<template>
  <require from='./elems/md-shadow'></require>
  <require from='./elems/md-drawer'></require>
  <require from='./elems/md-table'></require>
  <require from="./elems/md-input"></require>
  <require from="./elems/md-select"></require>
  <require from="./elems/md-button"></require>
  <md-drawer>
    <md-input value.bind="filter" style="padding:0 8px">Filter Accounts</md-input>
    <a
      repeat.for="account of accounts"
      class="mdl-navigation__link ${ account._id == $parent.account._id ? 'mdl-navigation__link--current' : ''}"
      click.delegate="$parent.select(account)">
      <div class="mdl-typography--title">${ account.name || 'New Account' }</div>
      ${ account.license }
    </a>
  </md-drawer>
  <section class="mdl-grid">
    <div md-shadow="2" class="mdl-card mdl-cell mdl-cell--9-col mdl-grid">
      <md-select options.bind="accounts" property="name" value.bind="from"    change.delegate="to = account" style="width:165px">From</md-select>
      <md-select options.bind="accounts" property="name" value.bind="to" change.delegate="from = account"    style="width:165px">To</md-select>
      <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="role" style="width:135px;">
        <input ref="role" type="checkbox" id="role" class="mdl-switch__input" checked />
        <span class="mdl-switch__label">${ role.checked ? 'Donation' : 'Label Only' }</span>
      </label>
      <md-button style="width:120px">Create</md-button>
      <br><br>
      ADMIN ONLY VIEW FOR EDITING ACCOUNTS, MAKING LABELS, AND VIEWING METRICS

      TODO: DONATIONS PLOTTED ON A TIMELINE (By Quarter?)
    </div>
    <div md-shadow="2" class="mdl-card mdl-cell mdl-cell--3-col">
      <div class="mdl-card__title mdl-grid">
        <div class="mdl-card__title-text mdl-cell mdl-cell--12-col">
          Account Information
        </div>
      </div>
      <div
        class="mdl-card__supporting-text"
        focusout.delegate="save($event, $this)"
        ref="$this"
        style="font-size:16px">
        <md-input value.bind="account.name">Facility</md-input>
        <md-select
          value.bind="account.license"
          options.bind="['', 'RCFE', 'SNF', 'Pharmacy', 'Recipient']">
          License
        </md-select>
        <md-input value.bind="account.street">Street</md-input>
        <md-input
          value.bind="account.city"
          style="width:178px">
          City
        </md-input>
        <md-input
          value.bind="account.state"
          style="width:50px">
          State
        </md-input>
        <md-input
          value.bind="account.zip"
          style="width:50px">
          Zip
        </md-input>
        <a href="#/${account._id}">
          <md-button primary raised style="width:100%">Switch to Account</md-button>
        </a>
      </div>
    </div>
  </section>
</template>
