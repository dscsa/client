<template>
  <require from='./elems/md-shadow'></require>
  <require from='./elems/md-drawer'></require>
  <require from="./elems/md-input"></require>
  <require from="./elems/md-select"></require>
  <require from="./elems/md-button"></require>
  <md-drawer>
    <md-input value.bind="filter" style="padding:0 8px">Filter Drugs</md-input>
    <a
      repeat.for="drug of drugs | filter:filter"
      class="mdl-navigation__link ${ drug._id == $parent.drug._id ? 'mdl-navigation__link--current' : ''}"
      click.delegate="$parent.select(drug)">
      <div class="mdl-typography--title" style="font-size:13px">
        ${ drug.name ? drug.name+' '+drug.strength : 'Add New Drug'}
      </div>
    </a>
  </md-drawer>
  <section class="mdl-grid">
    <div md-shadow="2" class="mdl-card mdl-cell mdl-cell--4-col">
      <div class="mdl-card__title mdl-grid" style="margin-left:0">
        <div class="mdl-card__title-text mdl-cell mdl-cell--12-col">
          ${ drug.name ? drug.name+' '+drug.strength : 'Drug Information'}
        </div>
        <div
          class="mdl-cell mdl-cell--12-col"
          style="margin-top:-8px;">
          ${drug.form || 'New drug'}
        </div>
      </div>
      <div
        class="mdl-card__supporting-text"
        focusout.delegate="save($event, $this)"
        ref="$this"
        style="font-size:16px">
        <md-input
          style="width:100%"
          value.bind="drug.name">
          Drug Name
        </md-input>
        <md-input
          style="width:100%"
          value.bind="drug.strength">
          Strength
        </md-input>
        <md-select
          style="width:100%"
          value.bind="drug.form"
          options.bind="['Tablet', 'Capsule', 'Injection', 'Patch']">
          Form
        </md-select>
        <md-input
          style="width:100%"
          value.bind="drug.brand">
          Brand
        </md-input>

        <md-input
          style="width:100%"
          value.bind="drug.labeler">
          Labeler
        </md-input>
        <md-input
          value.bind="drug.ndc"
          pattern="\d{4}-\d{4}|\d{5}-\d{3}|\d{5}-\d{4}"
          style="width:200px">
          NDC
        </md-input>
        <md-input
          value.bind="drug.nadac.price"
          type="number"
          step=".01"
          style="width:83px">
          Price
        </md-input>
      </div>
      <div class="mdl-card__actions mdl-card--border">
        <md-button>View Updates</md-button>
      </div>
    </div>
    <div md-shadow="2" class="mdl-card mdl-cell mdl-cell--8-col">
      <md-input
        value.bind="drug.image"
        focusout.delegate="save($event, $this)"
        ref="$this"
        style="margin:0 16px 0 16px">
        Image
      </md-input>
      <img style="margin:0 16px 16px 16px" if.bind="drug.image" src.bind="drug.image">
    </div>
  </section>
</template>
